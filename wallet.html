<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>My Wallet - Neuro Bot</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="pro-style.css">
    
    <style>
        /* [WALLET 전용 스타일] */
        .wallet-card { 
            background: #080808; border: 1px solid #222; border-radius: 8px; 
            padding: 20px; margin: 15px; 
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.05);
        }

        /* 매매일지 테이블 스타일 */
        .history-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.75rem;
            margin-top: 10px;
        }
        .history-table th {
            text-align: left;
            color: #666;
            padding: 10px 5px;
            border-bottom: 1px solid #333;
            font-weight: normal;
        }
        .history-table td {
            padding: 12px 5px;
            border-bottom: 1px solid #111;
            color: #ddd;
        }
        
        /* 테이블 컬럼별 스타일 */
        .col-date { color: #888; font-size: 0.7rem; }
        .col-pos { font-weight: bold; }
        .pos-long { color: #00ff88; }
        .pos-short { color: #ff3344; }
        .col-price { font-family: 'Consolas', monospace; color: #ccc; }
        .col-result { text-align: right; font-weight: bold; }
        .col-winrate { text-align: right; color: #aaa; }

        /* 수익/손실 색상 */
        .profit-plus { color: #0f0; }
        .profit-minus { color: #f00; }

        /* 버튼 스타일 */
        .action-btn { 
            background: #003300; border: 1px solid #005500; color: #0f0; 
            padding: 8px 15px; border-radius: 4px; font-size: 0.8rem; cursor: pointer; 
            transition: 0.3s;
        }
        .action-btn:hover { background: #004400; box-shadow: 0 0 10px #0f0; }
    </style>
</head>
<body>

    <div class="ai-super-header">
        <div class="brand-catchphrase">NEURAL WALLET <span style="color:#666;">//</span> HISTORY ANALYSIS</div>
    </div>

    <div id="internal-header-slot"></div>

    <main class="main-content" style="padding-top: 20px;">
        
        <div class="wallet-card" style="text-align:center; border:1px solid #004400;">
            <div style="color:#888; font-size:0.8rem; margin-bottom:5px;">TOTAL ESTIMATED VALUE</div>
            <div style="font-size:1.8rem; font-weight:bold; color:#fff;">$ 51,240.50</div>
            <div style="color:#0f0; font-size:0.9rem; margin-top:5px; display:flex; justify-content:center; gap:10px;">
                <span>▲ +1,240.50 (2.4%)</span>
                <span style="color:#666;">|</span>
                <span style="color:#aaa;">WIN RATE: 78%</span>
            </div>
            <div style="margin-top:20px; display:flex; gap:10px; justify-content:center;">
                <button class="action-btn">DEPOSIT</button>
                <button class="action-btn" style="background:#330000; border-color:#550000; color:#f00;">WITHDRAW</button>
            </div>
        </div>

        <div style="margin: 0 15px 5px; color:#666; font-size:0.8rem; display:flex; justify-content:space-between;">
            <span>TRADING HISTORY (24H)</span>
            <span style="color:#00ff88;"><i class="fas fa-sync-alt"></i> SYNCED</span>
        </div>

        <div class="wallet-card" style="padding: 10px; overflow-x: auto;">
            <table class="history-table">
                <thead>
                    <tr>
                        <th>DATE</th>
                        <th>POS</th>
                        <th>BUY/SELL</th>
                        <th style="text-align:right;">RESULT</th>
                        <th style="text-align:right;">WIN%</th>
                    </tr>
                </thead>
                <tbody id="history-list">
                    </tbody>
            </table>
        </div>

    </main>

    <script>
        // 헤더 로드
        window.addEventListener('load', () => {
            fetch('header.html')
            .then(res => res.text())
            .then(data => {
                document.getElementById('internal-header-slot').innerHTML = data;
            });
            
            // 매매일지 데이터 생성 실행
            generateHistory();
        });

        // 가상 매매 기록 생성 함수
        function generateHistory() {
            const tableBody = document.getElementById('history-list');
            let html = '';
            
            // 24시간 동안의 가상 데이터 10개 생성
            const trades = [
                { pos: 'LONG', buy: 70120, sell: 70850, winRate: 78 },
                { pos: 'SHORT', buy: 70900, sell: 70800, winRate: 77 },
                { pos: 'LONG', buy: 70500, sell: 70400, winRate: 75 }, // 손절
                { pos: 'LONG', buy: 69800, sell: 70300, winRate: 76 },
                { pos: 'SHORT', buy: 70200, sell: 69500, winRate: 74 },
                { pos: 'LONG', buy: 69200, sell: 69900, winRate: 72 },
                { pos: 'SHORT', buy: 69800, sell: 69950, winRate: 70 }, // 손절
                { pos: 'LONG', buy: 68500, sell: 69100, winRate: 71 },
                { pos: 'SHORT', buy: 68900, sell: 68200, winRate: 69 },
                { pos: 'LONG', buy: 67800, sell: 68400, winRate: 67 }
            ];

            const now = new Date();

            trades.forEach((trade, index) => {
                // 시간 계산 (조금씩 과거로)
                const date = new Date(now - (index * 3600000) - (Math.random() * 1800000));
                const timeStr = date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false });
                const dateStr = `${date.getMonth()+1}/${date.getDate()}`;

                // 수익 계산
                let profit = 0;
                let profitPercent = 0;
                let isWin = false;

                if (trade.pos === 'LONG') {
                    profit = (trade.sell - trade.buy);
                    profitPercent = (profit / trade.buy) * 100 * 10; // 레버리지 10배 가정
                } else {
                    profit = (trade.buy - trade.sell);
                    profitPercent = (profit / trade.buy) * 100 * 10;
                }

                isWin = profit > 0;
                const sign = isWin ? '+' : '';
                const colorClass = isWin ? 'profit-plus' : 'profit-minus';
                
                // HTML 조립
                html += `
                    <tr>
                        <td class="col-date">
                            <div>${dateStr}</div>
                            <div>${timeStr}</div>
                        </td>
                        <td class="col-pos">
                            <span class="${trade.pos === 'LONG' ? 'pos-long' : 'pos-short'}">${trade.pos}</span>
                        </td>
                        <td class="col-price">
                            <div style="font-size:0.75rem;">IN: ${trade.buy.toLocaleString()}</div>
                            <div style="font-size:0.75rem;">OUT: ${trade.sell.toLocaleString()}</div>
                        </td>
                        <td class="col-result ${colorClass}">
                            <div>${sign}$${Math.abs(profit * 0.5).toFixed(2)}</div>
                            <div style="font-size:0.7rem;">(${sign}${Math.abs(profitPercent).toFixed(2)}%)</div>
                        </td>
                        <td class="col-winrate">
                            ${trade.winRate}%
                        </td>
                    </tr>
                `;
            });

            tableBody.innerHTML = html;
        }
    </script>
</body>
</html>
